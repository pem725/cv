---
title: "Patrick E. McKnight, Ph.D."
format:
  html:
    theme: cosmo
    toc: true
    toc-location: left
    toc-title: "Contents"
    toc-depth: 2
    page-layout: article
    smooth-scroll: true
    embed-resources: true
    self-contained: true
  typst:
    toc: false
    margin:
      x: 1in
      y: 0.75in
    mainfont: "Linux Libertine"
    fontsize: 11pt
execute:
  echo: false
  warning: false
jupyter: python3
---

```{python}
#| label: setup
import yaml
import pandas as pd
import os
from datetime import datetime
from IPython.display import HTML, Markdown

# Detect output format - Plotly charts only work in HTML
IS_HTML = os.environ.get('QUARTO_FIG_FORMAT', '') != 'svg'

if IS_HTML:
    import plotly.express as px
    import plotly.graph_objects as go

with open('publications.yaml', 'r') as f:
    data = yaml.safe_load(f)

# Color palette - conservative academic
colors = {
    'primary': '#2c3e50',
    'secondary': '#34495e',
    'accent': '#c0392b',
    'teal': '#16a085',
    'blue': '#2980b9',
    'gray': '#7f8c8d'
}
```

::: {.content-visible when-format="html"}
## Contact Information
:::

**Associate Professor of Psychology** | George Mason University

**Email:** [pmcknigh@gmu.edu](mailto:pmcknigh@gmu.edu) | **Phone:** (703) 993-8292
**Office:** MSN 3F5, 4400 University Drive, Fairfax, VA 22030

[Google Scholar](https://scholar.google.com/citations?user=sH44LC4AAAAJ) | [ORCID](https://orcid.org/0000-0002-9067-9066) | [GMU Profile](https://psychology.gmu.edu/people/pmcknigh)

---

## Education

```{python}
#| output: asis
for edu in data['education']:
    details = ""
    if 'details' in edu:
        details = f"\n  - *{edu['details']}*"
    print(f"**{edu['degree']} in {edu['field']}**, {edu['institution']}, {edu['year']}{details}\n")
```

---

## Academic Positions

```{python}
#| output: asis
positions = data['positions'].get('current', []) + data['positions'].get('previous', [])
for pos in positions:
    end = "Present" if pos.get('current') else pos.get('end', '')
    dept = f", {pos.get('department', '')}" if pos.get('department') else ""
    print(f"**{pos['title']}**, {pos['institution']}{dept}, {pos['start']}–{end}\n")
```

---

## Books

```{python}
#| output: asis
for book in data['publications']['books']:
    cite_str = f" *[{book['citations']:,} citations]*" if book.get('citations') else ""
    print(f"{book['authors']} ({book['year']}). *{book['title']}*. {book.get('location', '')}: {book['publisher']}.{cite_str}\n")
```

---

## Selected Publications

```{python}
#| output: asis
articles = sorted(data['publications']['articles'], key=lambda x: x['year'], reverse=True)

current_year = None
for article in articles[:30]:
    if article['year'] != current_year:
        current_year = article['year']
        print(f"\n### {current_year}\n")

    cite = f"{article['authors']} ({article['year']}). {article['title']}. "
    if 'journal' in article:
        cite += f"*{article['journal']}*"
        if 'volume' in article:
            cite += f", {article['volume']}"
        if 'pages' in article:
            cite += f", {article['pages']}"
        cite += "."

    cite_count = f" *[{article['citations']} citations]*" if article.get('citations') else ""
    print(f"- {cite}{cite_count}\n")

print(f"\n*See [Google Scholar](https://scholar.google.com/citations?user=sH44LC4AAAAJ) for complete publication list ({len(articles)} articles)*")
```

---

## Research Funding

```{python}
#| output: asis
grants = data['grants'].get('funded', [])
total = sum(g.get('amount', 0) for g in grants)
print(f"**Total Funding:** ${total:,.0f}\n")

for grant in grants:
    amount = f" — ${grant['amount']:,}" if grant.get('amount') else ""
    pi_info = f" (PI: {grant['pi']})" if grant.get('pi') and grant['role'] != 'Principal Investigator' else ""
    print(f"**{grant['title']}**{pi_info}  \n{grant['funder']} | {grant['role']}{amount} | {grant['start']}–{grant['end']}\n")
```

---

## Teaching

### Graduate Courses

```{python}
#| output: asis
for course in data['courses']['graduate']:
    print(f"- **{course['code']}**: {course['title']}")
```

### Undergraduate Courses

```{python}
#| output: asis
for course in data['courses']['undergraduate']:
    print(f"- **{course['code']}**: {course['title']}")
```

---

## Doctoral Students

```{python}
#| output: asis
graduated = data.get('students_graduated', [])
current = data.get('students_current', [])

if current:
    print("### Current Students\n")
    for s in current:
        print(f"- {s['name']}")
    print()

if graduated:
    print(f"### Completed ({len(graduated)})\n")
    for s in sorted(graduated, key=lambda x: x['year'], reverse=True):
        print(f"- {s['name']}, {s['institution']}, {s['year']}")
```

---

## Professional Affiliations

```{python}
#| output: asis
affiliations = data.get('affiliations', [])
for a in affiliations:
    role = f" — {a.get('role', '')}" if a.get('role') else ""
    print(f"- {a['name']}, {a['start']}–Present{role}")
```

---

## Technical Skills

```{python}
#| output: asis
skills = data['skills']
print(f"**Statistical Software:** {', '.join(skills['statistical'])}\n")
print(f"**SEM/IRT:** {', '.join(skills['sem'] + skills['irt'])}\n")
print(f"**Programming:** {', '.join(skills['programming'])}\n")
```

---

## Scholarly Impact

```{python}
#| output: asis
metrics = data['metrics']
print(f"""
| Metric | Value |
|:-------|------:|
| Total Citations | {metrics['total_citations']:,} |
| h-index | {metrics['h_index']} |
| i10-index | {metrics['i10_index']} |
| Publications | {metrics['publications_count']}+ |

*Source: [Google Scholar](https://scholar.google.com/citations?user=sH44LC4AAAAJ), {metrics['last_updated']}*
""")
```

::: {.content-visible when-format="html"}

### Research Contributions by Area

```{python}
#| label: research-areas
if IS_HTML:
    articles = data['publications']['articles']
    categories = {}
    for art in articles:
        cat = art.get('category', 'other')
        if cat not in categories:
            categories[cat] = {'count': 0, 'citations': 0}
        categories[cat]['count'] += 1
        categories[cat]['citations'] += art.get('citations', 0)

    cat_df = pd.DataFrame([
        {'Area': k.replace('_', ' ').title(), 'Publications': v['count'], 'Citations': v['citations']}
        for k, v in categories.items()
    ]).sort_values('Citations', ascending=False)

    fig = go.Figure(data=[go.Pie(
        labels=cat_df['Area'],
        values=cat_df['Citations'],
        hole=0.4,
        marker_colors=[colors['primary'], colors['blue'], colors['teal'],
                       colors['accent'], colors['secondary'], colors['gray']][:len(cat_df)],
        textposition='outside',
        textinfo='label+percent',
        hovertemplate='<b>%{label}</b><br>Citations: %{value:,}<br>%{percent}<extra></extra>'
    )])

    fig.update_layout(
        title='Citation Distribution by Research Area',
        showlegend=False,
        height=400,
        margin=dict(t=60, b=20, l=20, r=20),
        annotations=[dict(text=f'{metrics["total_citations"]:,}<br>Total', x=0.5, y=0.5, font_size=14, showarrow=False)]
    )
    fig.show()
```

### Publication & Citation Trends

```{python}
#| label: pub-timeline
if IS_HTML:
    articles = data['publications']['articles']
    pubs = articles + data['publications']['books']
    years_data = {}
    for p in pubs:
        yr = p['year']
        if yr not in years_data:
            years_data[yr] = {'count': 0, 'citations': 0}
        years_data[yr]['count'] += 1
        years_data[yr]['citations'] += p.get('citations', 0)

    timeline_df = pd.DataFrame([
        {'Year': yr, 'Publications': v['count'], 'Citations': v['citations']}
        for yr, v in sorted(years_data.items())
    ])

    fig = go.Figure()
    fig.add_trace(go.Bar(
        x=timeline_df['Year'], y=timeline_df['Publications'],
        name='Publications', marker_color=colors['primary'],
        hovertemplate='%{x}: %{y} publications<extra></extra>'
    ))
    fig.add_trace(go.Scatter(
        x=timeline_df['Year'], y=timeline_df['Citations'],
        name='Citations', yaxis='y2', mode='lines+markers',
        line=dict(color=colors['accent'], width=2), marker=dict(size=6),
        hovertemplate='%{x}: %{y:,} citations<extra></extra>'
    ))

    fig.update_layout(
        title='Publications & Citations Over Time',
        xaxis_title='Year',
        yaxis=dict(title='Publications', side='left', showgrid=False),
        yaxis2=dict(title='Citations', side='right', overlaying='y', showgrid=False),
        height=350, margin=dict(t=60, b=40, l=50, r=50),
        legend=dict(orientation='h', yanchor='bottom', y=1.02, xanchor='center', x=0.5),
        hovermode='x unified'
    )
    fig.show()
```

### Most Cited Works

```{python}
#| label: top-cited
if IS_HTML:
    articles = data['publications']['articles']
    all_pubs = articles + data['publications']['books']
    top_cited = sorted([p for p in all_pubs if p.get('citations', 0) > 0],
                       key=lambda x: x.get('citations', 0), reverse=True)[:10]

    top_df = pd.DataFrame([{
        'Title': p['title'][:55] + '...' if len(p['title']) > 55 else p['title'],
        'Year': p['year'],
        'Citations': p.get('citations', 0),
        'Type': 'Book' if 'publisher' in p else 'Article'
    } for p in top_cited])

    fig = go.Figure(go.Bar(
        x=top_df['Citations'], y=top_df['Title'], orientation='h',
        marker_color=[colors['accent'] if t == 'Book' else colors['blue'] for t in top_df['Type']],
        text=top_df['Citations'], textposition='outside',
        hovertemplate='<b>%{y}</b><br>Citations: %{x:,}<extra></extra>'
    ))

    fig.update_layout(
        title='Top 10 Most Cited Works',
        xaxis_title='Citations',
        yaxis=dict(autorange='reversed'),
        height=400, margin=dict(t=60, b=40, l=300, r=60),
    )
    fig.show()
```

:::

---

## Beyond Academia

```{python}
#| output: asis
if 'personal' in data:
    personal = data['personal']
    if 'athletics' in personal:
        athletics = personal['athletics']

        if 'mountaineering' in athletics:
            summits = [m for m in athletics['mountaineering'] if 'summit' in m]
            if summits:
                print("**Mountaineering:** " + ", ".join([f"{s['summit']} ({s['year']})" for s in summits]) + "\n")

        if 'open_water_swimming' in athletics:
            swims = [s for s in athletics['open_water_swimming'] if 'event' in s]
            achievements = [s for s in athletics['open_water_swimming'] if 'achievement' in s]
            if swims:
                print("**Marathon Swimming:** " + ", ".join([s['event'] for s in swims]) + "\n")
            if achievements:
                for a in achievements:
                    print(f"- {a['achievement']}")
                print()

        if 'triathlon' in athletics:
            for t in athletics['triathlon']:
                if 'event' in t:
                    print(f"**Triathlon:** {t['event']} ({t.get('time', '')})\n")

if data.get('erdos_number'):
    print(f"**Erdos Number:** {data['erdos_number']}")
```

---

::: {.content-visible when-format="html"}
::: {.footer}
*Last updated: `{python} datetime.now().strftime('%B %d, %Y')`* |
[Download PDF](McKnight_CV.pdf) |
[NIH Biosketch](McKnight_NIH_Biosketch.pdf) |
[GitHub](https://github.com/pem725/cv)
:::
:::

::: {.content-visible when-format="typst"}
*Last updated: `{python} datetime.now().strftime('%B %d, %Y')`*
:::
